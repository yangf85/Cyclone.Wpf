<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ctl="clr-namespace:Cyclone.Wpf.Controls">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Cyclone.Wpf;component/Resources/CommonResources.xaml" />
        <ResourceDictionary Source="/Cyclone.Wpf;component/Styles/ListBox.xaml" />
        <ResourceDictionary Source="/Cyclone.Wpf;component/Styles/RepeatButton.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style x:Key="TransferBox.TransferButtonStyle"
           BasedOn="{StaticResource RepeatButton.Style.Basic}"
           TargetType="RepeatButton">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="MinWidth" Value="{DynamicResource Width.Vertical.Control}" />
        <Setter Property="MinHeight" Value="{DynamicResource Height.Horizontal.Control}" />
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.5" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TransferBox.TransferListBoxStyle"
           BasedOn="{StaticResource ListBox.Style.Basic}"
           TargetType="ListBox" />

    <ControlTemplate x:Key="TransferBox.ControlTemplate.Basic.Horizontal" TargetType="ctl:TransferBox">
        <Border Height="{TemplateBinding Height}"
                Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                SnapsToDevicePixels="True">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <ListBox x:Name="PART_SourceListBox"
                         Grid.Column="0"
                         BorderThickness="0,0,1,0"
                         ItemTemplate="{TemplateBinding ItemTemplate}"
                         ItemsPanel="{TemplateBinding ItemPanel}"
                         ItemsSource="{TemplateBinding ItemsSource}"
                         SelectionMode="{TemplateBinding SelectionMode}" />
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="1" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <RepeatButton x:Name="PART_ToTargetRepeatButton"
                                  Grid.Row="0"
                                  Height="Auto"
                                  Command="{x:Static ctl:TransferBox.ToTargetCommand}">
                        <RepeatButton.Content>
                            <Path x:Name="ToTargetPath"
                                  Width="16"
                                  Height="16"
                                  Data="M516.266667 494.933333l-192 192-29.866667-29.866666 162.133333-162.133334-162.133333-162.133333 29.866667-29.866667 192 192z m256 0l-192 192-29.866667-29.866666 162.133333-162.133334-162.133333-162.133333 29.866667-29.866667 192 192z"
                                  Fill="{DynamicResource Icon.Default.Foreground}"
                                  Stretch="Uniform" />
                        </RepeatButton.Content>
                    </RepeatButton>
                    <Border Grid.Row="1" Background="{TemplateBinding BorderBrush}" />
                    <RepeatButton x:Name="PART_ToSourceRepeatButton"
                                  Grid.Row="2"
                                  Height="Auto"
                                  Command="{x:Static ctl:TransferBox.ToSourceCommand}">
                        <RepeatButton.Content>
                            <Path x:Name="ToSourcePath"
                                  Width="16"
                                  Height="16"
                                  Data="M550.4 494.933333l192 192 29.866667-29.866666-162.133334-162.133334 162.133334-162.133333-29.866667-29.866667-192 192z m-256 0l192 192 29.866667-29.866666-162.133334-162.133334 162.133334-162.133333-29.866667-29.866667-192 192z"
                                  Fill="{DynamicResource Icon.Default.Foreground}"
                                  Stretch="Uniform" />
                        </RepeatButton.Content>
                    </RepeatButton>
                </Grid>
                <ListBox x:Name="PART_TargetListBox"
                         Grid.Column="2"
                         BorderBrush="{TemplateBinding BorderBrush}"
                         BorderThickness="0"
                         ItemTemplate="{TemplateBinding ItemTemplate}"
                         ItemsPanel="{TemplateBinding ItemPanel}"
                         ItemsSource="{TemplateBinding ItemsTarget}"
                         SelectionMode="{TemplateBinding SelectionMode}"
                         Style="{StaticResource TransferBox.TransferListBoxStyle}" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger SourceName="ToTargetPath" Property="IsMouseOver" Value="True">
                <Setter TargetName="ToTargetPath" Property="Opacity" Value="0.5" />
            </Trigger>
            <Trigger SourceName="ToSourcePath" Property="IsMouseOver" Value="True">
                <Setter TargetName="ToSourcePath" Property="Opacity" Value="0.5" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <ControlTemplate x:Key="TransferBox.ControlTemplate.Basic.Vertical" TargetType="ctl:TransferBox">
        <Border Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                SnapsToDevicePixels="True">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <ListBox x:Name="PART_SourceListBox"
                         Grid.Row="0"
                         BorderThickness="0"
                         ItemTemplate="{TemplateBinding ItemTemplate}"
                         ItemsPanel="{TemplateBinding ItemPanel}"
                         ItemsSource="{TemplateBinding ItemsSource}"
                         SelectionMode="{TemplateBinding SelectionMode}"
                         Style="{DynamicResource TransferBox.TransferListBoxStyle}" />
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="1" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <RepeatButton x:Name="PART_ToTargetRepeatButton"
                                  Grid.Column="0"
                                  Height="Auto"
                                  Command="{x:Static ctl:TransferBox.ToTargetCommand}">
                        <RepeatButton.Content>
                            <Path x:Name="ToTargetPath"
                                  Width="16"
                                  Height="16"
                                  Data="M533.333333 477.866667L341.333333 285.866667l29.866667-29.866667 162.133333 162.133333L695.466667 256l29.866666 29.866667-192 192z m0 256L341.333333 541.866667l29.866667-29.866667 162.133333 162.133333 162.133334-162.133333 29.866666 29.866667-192 192z"
                                  Fill="{DynamicResource Icon.Default.Foreground}"
                                  Stretch="Uniform" />
                        </RepeatButton.Content>
                    </RepeatButton>
                    <Border Grid.Column="1" Background="{TemplateBinding BorderBrush}" />
                    <RepeatButton x:Name="PART_ToSourceRepeatButton"
                                  Grid.Column="2"
                                  Height="Auto"
                                  Command="{x:Static ctl:TransferBox.ToSourceCommand}">
                        <RepeatButton.Content>
                            <Path x:Name="ToSourcePath"
                                  Width="16"
                                  Height="16"
                                  Data="M533.333333 512L341.333333 704l29.866667 29.866667 162.133333-162.133334 162.133334 162.133334 29.866666-29.866667-192-192z m0-256L341.333333 448l29.866667 29.866667 162.133333-162.133334 162.133334 162.133334 29.866666-29.866667L533.333333 256z"
                                  Fill="{DynamicResource Icon.Default.Foreground}"
                                  Stretch="Uniform" />
                        </RepeatButton.Content>
                    </RepeatButton>
                </Grid>
                <ListBox x:Name="PART_TargetListBox"
                         Grid.Row="2"
                         BorderBrush="{TemplateBinding BorderBrush}"
                         BorderThickness="0,1,0,0"
                         ItemTemplate="{TemplateBinding ItemTemplate}"
                         ItemsPanel="{TemplateBinding ItemPanel}"
                         ItemsSource="{TemplateBinding ItemsTarget}"
                         SelectionMode="{TemplateBinding SelectionMode}"
                         Style="{DynamicResource TransferBox.TransferListBoxStyle}" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger SourceName="ToTargetPath" Property="IsMouseOver" Value="True">
                <Setter TargetName="ToTargetPath" Property="Opacity" Value="0.5" />
            </Trigger>
            <Trigger SourceName="ToSourcePath" Property="IsMouseOver" Value="True">
                <Setter TargetName="ToSourcePath" Property="Opacity" Value="0.5" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style x:Key="TransferBox.Style.Basic" TargetType="ctl:TransferBox">
        <Setter Property="Background" Value="{DynamicResource Global.Background}" />
        <Setter Property="BorderBrush" Value="{DynamicResource Default.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Height" Value="Auto" />
        <Style.Triggers>
            <Trigger Property="Orientation" Value="Vertical">
                <Setter Property="Template" Value="{StaticResource TransferBox.ControlTemplate.Basic.Vertical}" />
                <Setter Property="ItemPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="Orientation" Value="Horizontal">
                <Setter Property="Template" Value="{StaticResource TransferBox.ControlTemplate.Basic.Horizontal}" />
                <Setter Property="ItemPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical" />
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style BasedOn="{StaticResource TransferBox.Style.Basic}" TargetType="ctl:TransferBox" />
</ResourceDictionary>